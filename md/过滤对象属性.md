## 过滤对象属性

[TOC]

### 1、前言

在实际的项目中，我们从数据库查出的数据并不是所有的字段要返回到前台，但是一般都是 统一的实体，这个时候，就需要过滤一些不需要返回的对象属性。

### 2、实现

#### 2.1、@JsonIgnore

> 在实体中字段添加`@JsonIgnore`可以注释不需要的字段；
>
> @JsonIgnore注解用来忽略某些字段，可以用在变量或者Getter方法上，用在Setter方法时，和变量效果一样。这个注解一般用在我们要忽略的字段上

~~~java
@Data
@EqualsAndHashCode(callSuper = false)
public class Test implements Serializable {

    private static final long serialVersionUID=1L;

    @TableId(value = "id", type = IdType.AUTO)
    private Integer id;

    private String name;

    private String age;

    @JsonIgnore
    private String subName;
}
~~~

~~~java
@GetMapping("test")
public Test test(Test test) {
    return test;
}
~~~

![1601434307268](%E8%BF%87%E6%BB%A4%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7.assets/1601434307268.png)

#### 2.2、@JsonIgnoreProperties

>@JsonIgnoreProperties
>
>@JsonIgnoreProperties(ignoreUnknown = true)，将这个注解写在类上之后，就会忽略类中不存在的字段。这个注解还可以指定要忽略的字段，例如@JsonIgnoreProperties({ “password”, “secretKey” })

~~~java
@Data
@EqualsAndHashCode(callSuper = false)
@JsonIgnoreProperties(value = {"subName", "age"})
public class Test implements Serializable {

    private static final long serialVersionUID=1L;

    @TableId(value = "id", type = IdType.AUTO)
    private Integer id;

    private String name;

    private String age;

    private String subName;
}
~~~

![1601434991063](%E8%BF%87%E6%BB%A4%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7.assets/1601434991063.png)

> 顺带扩展一下其他内容

> @JsonInclude(JsonInclude.Include.NON_NULL)
>
> 该注解也是放在类名上面，作用是：忽略类中字段值为null的对象属性

~~~java
@Data
@EqualsAndHashCode(callSuper = false)
@JsonIgnoreProperties(value = {"subName", "age"})
@JsonInclude(JsonInclude.Include.NON_NULL)
public class Test implements Serializable {

    private static final long serialVersionUID=1L;

    @TableId(value = "id", type = IdType.AUTO)
    private Integer id;

    private String name;

    private String age;

    private String subName;
}

~~~

不添加注解前：

![1601436153373](%E8%BF%87%E6%BB%A4%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7.assets/1601436153373.png)

添加注解后：

![1601436203845](%E8%BF%87%E6%BB%A4%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7.assets/1601436203845.png)

> @JsonProperty("customer")
>
> 该注解是放在字段上面，作用是：当`返回前端`时字段为`customer`（注解里定义的属性）, 接收字段不会受到影响

~~~java
@Data
@EqualsAndHashCode(callSuper = false)
@JsonIgnoreProperties(value = {"subName", "age"})
@JsonInclude(JsonInclude.Include.NON_NULL)
public class Test implements Serializable {

    private static final long serialVersionUID=1L;

    @TableId(value = "id", type = IdType.AUTO)
    private Integer id;

    @JsonProperty("customer")
    private String name;

    private String age;

    private String subName;
}
~~~

![1601436463919](%E8%BF%87%E6%BB%A4%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7.assets/1601436463919.png)